<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mellanox SwitchX SDK API Guide: sdk/sx_api_bulk_counter.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mellanox SwitchX SDK API Guide
   &#160;<span id="projectnumber">4.4.2044-042</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_243a4ba6b4f893d71afbb5a3e90552fa.html">sdk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sx_api_bulk_counter.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="sx__api__bulk__counter_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0efa0de329413d231ca7c79568b942cc"><td class="memItemLeft" align="right" valign="top">sx_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sx__api__bulk__counter_8h.html#a0efa0de329413d231ca7c79568b942cc">sx_api_bulk_counter_log_verbosity_level_set</a> (const sx_api_handle_t handle, const sx_log_verbosity_target_t verbosity_target, const sx_verbosity_level_t module_verbosity_level, const sx_verbosity_level_t api_verbosity_level)</td></tr>
<tr class="separator:a0efa0de329413d231ca7c79568b942cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeda47ec184a8b34b0023a30f58770e11"><td class="memItemLeft" align="right" valign="top">sx_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sx__api__bulk__counter_8h.html#aeda47ec184a8b34b0023a30f58770e11">sx_api_bulk_counter_log_verbosity_level_get</a> (const sx_api_handle_t handle, const sx_log_verbosity_target_t verbosity_target, sx_verbosity_level_t *module_verbosity_level_p, sx_verbosity_level_t *api_verbosity_level_p)</td></tr>
<tr class="separator:aeda47ec184a8b34b0023a30f58770e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96068ea7142761ce156fd1c8ab51faf4"><td class="memItemLeft" align="right" valign="top">sx_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sx__api__bulk__counter_8h.html#a96068ea7142761ce156fd1c8ab51faf4">sx_api_bulk_counter_buffer_set</a> (const sx_api_handle_t handle, const sx_access_cmd_t cmd, const <a class="el" href="sx__bulk__counter__auto_8h.html#a264385d0fbc6d9f6a440d3dbb503d6a3">sx_bulk_cntr_buffer_key_t</a> *key_p, <a class="el" href="sx__bulk__counter__auto_8h.html#a63bd21499d5d380ca84212a952a157e3">sx_bulk_cntr_buffer_t</a> *buffer_p)</td></tr>
<tr class="separator:a96068ea7142761ce156fd1c8ab51faf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb6dbab88535de0970d0d507aeab5c8b"><td class="memItemLeft" align="right" valign="top">sx_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sx__api__bulk__counter_8h.html#adb6dbab88535de0970d0d507aeab5c8b">sx_api_bulk_counter_transaction_set</a> (const sx_api_handle_t handle, const sx_access_cmd_t cmd, const <a class="el" href="sx__bulk__counter__auto_8h.html#a63bd21499d5d380ca84212a952a157e3">sx_bulk_cntr_buffer_t</a> *buffer_p)</td></tr>
<tr class="separator:adb6dbab88535de0970d0d507aeab5c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d664a825b59434d5d51d00668ec9a3"><td class="memItemLeft" align="right" valign="top">sx_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sx__api__bulk__counter_8h.html#a65d664a825b59434d5d51d00668ec9a3">sx_api_bulk_counter_transaction_get</a> (const sx_api_handle_t handle, const <a class="el" href="sx__bulk__counter_8h.html#abdb158787b2902d2eab4882d742d1d9b">sx_bulk_cntr_read_key_t</a> *key_p, const <a class="el" href="sx__bulk__counter__auto_8h.html#a63bd21499d5d380ca84212a952a157e3">sx_bulk_cntr_buffer_t</a> *buffer_p, <a class="el" href="sx__bulk__counter_8h.html#af8199a102679ed15da7cfedf3565ecd4">sx_bulk_cntr_data_t</a> *counter_data_p)</td></tr>
<tr class="separator:a65d664a825b59434d5d51d00668ec9a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0efa0de329413d231ca7c79568b942cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0efa0de329413d231ca7c79568b942cc">&#9670;&nbsp;</a></span>sx_api_bulk_counter_log_verbosity_level_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sx_status_t sx_api_bulk_counter_log_verbosity_level_set </td>
          <td>(</td>
          <td class="paramtype">const sx_api_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sx_log_verbosity_target_t&#160;</td>
          <td class="paramname"><em>verbosity_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sx_verbosity_level_t&#160;</td>
          <td class="paramname"><em>module_verbosity_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sx_verbosity_level_t&#160;</td>
          <td class="paramname"><em>api_verbosity_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets the log verbosity level of BULK COUNTER MODULE Supported devices: Spectrum, Spectrum2, Spectrum3.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>- SX-API handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">verbosity_target</td><td>- set verbosity of : API / MODULE / BOTH </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">module_verbosity_level</td><td>- BULK COUNTER module verbosity level </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">api_verbosity_level</td><td>- BULK COUNTER API verbosity level</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SX_STATUS_SUCCESS if operation completes successfully SX_STATUS_PARAM_ERROR if any input parameters is invalid SX_STATUS_ERROR general error </dd></dl>

</div>
</div>
<a id="aeda47ec184a8b34b0023a30f58770e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeda47ec184a8b34b0023a30f58770e11">&#9670;&nbsp;</a></span>sx_api_bulk_counter_log_verbosity_level_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sx_status_t sx_api_bulk_counter_log_verbosity_level_get </td>
          <td>(</td>
          <td class="paramtype">const sx_api_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sx_log_verbosity_target_t&#160;</td>
          <td class="paramname"><em>verbosity_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sx_verbosity_level_t *&#160;</td>
          <td class="paramname"><em>module_verbosity_level_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sx_verbosity_level_t *&#160;</td>
          <td class="paramname"><em>api_verbosity_level_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the log verbosity level of BULK COUNTER MODULE Supported devices: Spectrum, Spectrum2, Spectrum3.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>- SX-API handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">verbosity_target</td><td>- get verbosity of : API / MODULE / BOTH </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">module_verbosity_level_p</td><td>- BULK COUNTER module verbosity level </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">api_verbosity_level_p</td><td>- BULK COUNTER API verbosity level</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SX_STATUS_SUCCESS if operation completes successfully SX_STATUS_PARAM_ERROR if any input parameters is invalid SX_STATUS_ERROR general error </dd></dl>

</div>
</div>
<a id="a96068ea7142761ce156fd1c8ab51faf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96068ea7142761ce156fd1c8ab51faf4">&#9670;&nbsp;</a></span>sx_api_bulk_counter_buffer_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sx_status_t sx_api_bulk_counter_buffer_set </td>
          <td>(</td>
          <td class="paramtype">const sx_api_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sx_access_cmd_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sx__bulk__counter__auto_8h.html#a264385d0fbc6d9f6a440d3dbb503d6a3">sx_bulk_cntr_buffer_key_t</a> *&#160;</td>
          <td class="paramname"><em>key_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sx__bulk__counter__auto_8h.html#a63bd21499d5d380ca84212a952a157e3">sx_bulk_cntr_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This API allocates or frees a buffer of an asynchronous bulk-counter-read operation. Notes:</p><ol type="1">
<li>Buffer is bound to key. An operation with a different key requires a new buffer.</li>
<li>Buffer may be reused on multiple operations of <a class="el" href="sx__api__bulk__counter_8h.html#adb6dbab88535de0970d0d507aeab5c8b">sx_api_bulk_counter_transaction_set()</a>.</li>
<li>Buffer operation must be completed or canceled before this function is called with SX_ACCESS_CMD_DESTROY command. Supported devices: Spectrum, Spectrum2, Spectrum3.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>- SX-API handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>- SX_ACCESS_CMD_CREATE to allocate buffer SX_ACCESS_CMD_DESTROY to free buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_p</td><td>- Bulk-counter desired counters: For port counters: list of logical port ID, list of counter groups, list of TCs, list of priorities. For flow counters: range of flow counter IDs. When cmd is SX_ACCESS_CMD_DESTROY, key should be NULL. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buffer_p</td><td>- On SX_ACCESS_CMD_CREATE, returned allocated buffer to be used by other APIs. On SX_ACCESS_CMD_DESTROY, the buffer to deallocate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SX_STATUS_SUCCESS if operation completes successfully </dd>
<dd>
SX_STATUS_INVALID_HANDLE if a NULL handle is received </dd>
<dd>
SX_STATUS_PARAM_NULL if a parameter is NULL </dd>
<dd>
SX_STATUS_PARAM_ERROR if there is a parameter error </dd>
<dd>
SX_STATUS_CMD_UNSUPPORTED if cmd is not valid </dd>
<dd>
SX_STATUS_NO_MEMORY if there is no free memory </dd>
<dd>
SX_STATUS_RESOURCE_IN_USE if buffer operation is running </dd>
<dd>
SX_STATUS_ERROR if operation completes with failure </dd></dl>

</div>
</div>
<a id="adb6dbab88535de0970d0d507aeab5c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb6dbab88535de0970d0d507aeab5c8b">&#9670;&nbsp;</a></span>sx_api_bulk_counter_transaction_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sx_status_t sx_api_bulk_counter_transaction_set </td>
          <td>(</td>
          <td class="paramtype">const sx_api_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sx_access_cmd_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sx__bulk__counter__auto_8h.html#a63bd21499d5d380ca84212a952a157e3">sx_bulk_cntr_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This API initiates or cancels an asynchronous bulk-counter-read operation. Notes:</p><ol type="1">
<li>After initiating the operation, user is expected to get SX_BULK_READ_DONE event and then use <a class="el" href="sx__api__bulk__counter_8h.html#a65d664a825b59434d5d51d00668ec9a3">sx_api_bulk_counter_transaction_get()</a>. Until SX_BULK_READ_DONE event is received by the user, buffer cannot be used with <a class="el" href="sx__api__bulk__counter_8h.html#a65d664a825b59434d5d51d00668ec9a3">sx_api_bulk_counter_transaction_get()</a>.</li>
<li>When initiating LAG port bulk-counter-read, its members are determined on operation initiation. Any change to the LAG port or to its members during the operation will not be reflected when reading the LAG counters upon operation completion.</li>
<li>On disable, the buffer cannot be used on another operation or freed until the SW_BULK_READ_DONE event is received.</li>
<li>Up to two transactions are allowed in parallel by the system: a. 2 x Port_Counters b. Any combination of two different bulk counter types Supported devices: Spectrum, Spectrum2, Spectrum3.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>- SX-API handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>- SX_ACCESS_CMD_READ to read a set of counters SX_ACCESS_CMD_READ_CLEAR to read and clear a set of counters SX_ACCESS_CMD_DISABLE to cancel an active operation </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_p</td><td>- Valid buffer which was allocated by sx_api_bulk_buffer_set().</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SX_STATUS_SUCCESS if operation completes successfully </dd>
<dd>
SX_STATUS_INVALID_HANDLE if a NULL handle is received </dd>
<dd>
SX_STATUS_PARAM_NULL if a parameter is NULL </dd>
<dd>
SX_STATUS_PARAM_ERROR if cmd value is invalid </dd>
<dd>
SX_STATUS_CMD_UNSUPPORTED if cmd is not valid </dd>
<dd>
SX_STATUS_RESOURCE_IN_USE if there is another operation with same type in-flight </dd>
<dd>
SX_STATUS_ERROR if operation completes with failure </dd></dl>

</div>
</div>
<a id="a65d664a825b59434d5d51d00668ec9a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d664a825b59434d5d51d00668ec9a3">&#9670;&nbsp;</a></span>sx_api_bulk_counter_transaction_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sx_status_t sx_api_bulk_counter_transaction_get </td>
          <td>(</td>
          <td class="paramtype">const sx_api_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sx__bulk__counter_8h.html#abdb158787b2902d2eab4882d742d1d9b">sx_bulk_cntr_read_key_t</a> *&#160;</td>
          <td class="paramname"><em>key_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sx__bulk__counter__auto_8h.html#a63bd21499d5d380ca84212a952a157e3">sx_bulk_cntr_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sx__bulk__counter_8h.html#af8199a102679ed15da7cfedf3565ecd4">sx_bulk_cntr_data_t</a> *&#160;</td>
          <td class="paramname"><em>counter_data_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This API reads a single counter from a bulk-counter-read buffer. Supported devices: Spectrum, Spectrum2, Spectrum3.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>- SX-API handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_p</td><td>- For port counter: Logical port ID, counter group, TC (optional), priority (optional), priority-group (optional). For flow counter: Counter ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_p</td><td>- Valid buffer which was allocated by sx_api_bulk_buffer_set(). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">counter_data_p</td><td>- Requested counter data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SX_STATUS_SUCCESS if operation completes successfully </dd>
<dd>
SX_STATUS_INVALID_HANDLE if a NULL handle is received </dd>
<dd>
SX_STATUS_PARAM_NULL if a parameter is NULL </dd>
<dd>
SX_STATUS_PARTIALLY_COMPLETE if transaction is in progress </dd>
<dd>
SX_STATUS_ERROR if operation completes with failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 30 2020 12:08:33 for Mellanox SwitchX SDK API Guide by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
